(function(d){var a=function(g,e){for(var f=e.length-1;f>=0;f--){if(g.style[e[f]]!==undefined){return e[f]}}};var b=d.Transform=function(f,e){this.element=f;this.style=a(f,e||["WebkitTransform","MozTransform","OTransform","msTransform"])};d.Transform.prototype={translate:function(e,f){return this.setter(e,f,"translate")},rotate:function(e,f){if(typeof e==="number"){return this.add("rotate",e)}return this.setter(e,f,"rotate")},skew:function(e,f){return this.setter(e,f,"skew")},scale:function(e,f){if(typeof e==="number"){return this.add("scale",e)}this.setter(e,f,"scale");return this},matrix:function(){var f=this.element.style[this.style],e=new RegExp(this.rules.matrix.regex).test(f),g="matrix("+Array.prototype.slice.call(arguments,0).join(",")+")";if(f==="none"){f=""}return e?this.set(f.replace(this.rules[rule].regex,g)):this.set(f+" "+g)},clear:function(){return this.set("")},set:function(e){this.element.style[this.style]=e;return this},setter:function(f,e,g){if(typeof f==="string"){return this.add(g+f.toUpperCase(),e)}for(i in f){if(f.hasOwnProperty(i)){this[g](i,f[i])}}return this},add:function(k,h){var f=this.element.style[this.style],k=k==="rotateZ"?"rotate":k,e=new RegExp(this.rules[k].regex).test(f),g=this.rules[k].unit,j=k+"("+h+g+")";if(f==="none"){f=""}return e?this.set(f.replace(this.rules[k].regex,j)):this.set(f+" "+j)},remove:function(e){return this.set(this.element.style[this.style].replace(this.rules[e].regex,""))},rules:{rotateX:{regex:/rotateX\((-?[0-9]+deg)\)/,unit:"deg"},rotateY:{regex:/rotateY\((-?[0-9]+deg)\)/,unit:"deg"},rotateZ:{regex:/rotateZ\((-?[0-9]+deg)\)/,unit:"deg"},rotate:{regex:/rotate\((-?[0-9]+deg)\)/,unit:"deg"},translateX:{regex:/translateX\((-?[0-9]+%)\)/,unit:"%"},translateY:{regex:/translateY\((-?[0-9]+%)\)/,unit:"%"},translateZ:{regex:/translateZ\((-?[0-9]+px)\)/,unit:"px"},scale:{regex:/scale\((-?[0-9]+)\)/,unit:""},scaleX:{regex:/scaleX\((-?[0-9]+)\)/,unit:""},scaleY:{regex:/scaleY\((-?[0-9]+)\)/,unit:""},skewX:{regex:/skewX\((-?[0-9]+deg)\)/,unit:"deg"},skewY:{regex:/skewY\((-?[0-9]+deg)\)/,unit:"deg"},scale:{regex:/scale\((-?[0-9]+\.?[0-9]+?)\)/,unit:""},scaleX:{regex:/scaleX\((-?[0-9]+\.?[0-9]+?)\)/,unit:""},scaleY:{regex:/scaleY\((-?[0-9]+\.?[0-9]+?)\)/,unit:""},matrix:{regex:/matrix(.+)/,unit:""}}};var c=d.Transition=function(f,e){this.element=f;this.supported=e||{prefixes:["WebkitTransition","MozTransition","OTransition","msTransition"],transformPrefixes:["-webkit-","-moz-","-o-","-ms-"]};this.style=a(f,this.supported.prefixes);this.supported.index=this.supported.prefixes.indexOf(this.style)};d.Transition.prototype={map:{duration:"Duration",property:"Property","timing-function":"TimingFunction"},set:function(f,e){if(typeof f==="string"){if(e==="transform"){e=this.supported.transformPrefixes[this.supported.index]+"transform"}this.element.style[this.style+this.map[f]]=e;return this}for(i in f){if(f.hasOwnProperty(i)){this.set(i,f[i])}}return this},clear:function(e){if(!e){return this.set({duration:"",property:"","timing-function":""})}return this.set(e,"")}}})(window);